---
// Navbar.astro
---

<div class="fixed flex justify-center items-center top-4 left-1/2 -translate-x-1/2 z-50">

  <span class="absolute -top-5 -left-4 text-2xl z-10 animate-pulse -rotate-12 select-none">⚡</span>

  <div class="relative border-[3px] border-ink dark:border-paper bg-paper dark:bg-ink shadow-[var(--shadow-comic)] px-6">

    <div class="absolute -bottom-[3px] -right-[3px] w-3 h-3 bg-ink dark:bg-paper"></div>

    <div class="h-[68px] flex items-center justify-between gap-8">

      <!-- Logo -->
      <div class="relative group cursor-pointer transition-transform hover:-rotate-6 hover:scale-110">
        <ion-icon class="text-3xl text-ink dark:text-paper block" name="beer"></ion-icon>
        <span class="
          absolute -top-9 left-1/2 -translate-x-1/2
          bg-yellow dark:bg-yellow border-2 border-ink dark:border-ink
          px-2 py-[2px] font-bangers text-sm text-ink tracking-widest whitespace-nowrap
          shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
          scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom
        ">Hey!</span>
      </div>

      <div class="w-[2px] h-9 bg-ink dark:bg-paper opacity-30"></div>

      <!-- Links -->
      <ul class="flex items-center gap-2 list-none font-bangers text-xl tracking-widest uppercase">
        <li>
          <a href="#" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper
            transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow
            hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          ">Inicio</a>
        </li>
        <li>
          <a href="#" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper
            transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow
            hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          ">Acerca de mí</a>
        </li>
        <li>
          <a href="#" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper
            transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow
            hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          ">Proyectos</a>
        </li>
      </ul>

      <div class="w-[2px] h-9 bg-ink dark:bg-paper opacity-30"></div>

      <!-- Action icons -->
      <div class="flex gap-3">

        <div class="relative group">
          <button id="lang-btn" class="
            w-10 h-10 flex items-center justify-center
            border-[2.5px] border-ink dark:border-paper
            bg-paper dark:bg-ink
            shadow-[3px_3px_0px_#1a1a2e] dark:shadow-[3px_3px_0px_#fffbf0]
            transition-all duration-150 cursor-pointer
            hover:bg-comic-blue dark:hover:bg-comic-blue
            hover:-translate-x-0.5 hover:-translate-y-0.5
            hover:shadow-[5px_5px_0px_#1a1a2e] dark:hover:shadow-[5px_5px_0px_#fffbf0]
            active:translate-x-0.5 active:translate-y-0.5
          ">
            <ion-icon class="text-xl text-ink dark:text-paper group-hover:text-white transition-colors" name="language"></ion-icon>
          </button>
          <span class="
            absolute -top-8 left-1/2 -translate-x-1/2
            bg-comic-red text-white border-2 border-ink dark:border-paper
            px-2 py-[1px] font-bangers text-xs tracking-widest whitespace-nowrap
            shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
            scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom pointer-events-none
          ">ES / EN</span>
        </div>

        <div class="relative group">
          <button id="theme-btn" class="
            w-10 h-10 flex items-center justify-center
            border-[2.5px] border-ink dark:border-paper
            bg-paper dark:bg-ink
            shadow-[3px_3px_0px_#1a1a2e] dark:shadow-[3px_3px_0px_#fffbf0]
            transition-all duration-150 cursor-pointer
            hover:bg-comic-blue dark:hover:bg-comic-blue
            hover:-translate-x-0.5 hover:-translate-y-0.5
            hover:shadow-[5px_5px_0px_#1a1a2e] dark:hover:shadow-[5px_5px_0px_#fffbf0]
            active:translate-x-0.5 active:translate-y-0.5
          ">
            <ion-icon id="theme-icon" class="text-xl text-ink dark:text-paper group-hover:text-white transition-colors" name="sunny"></ion-icon>
          </button>
          <span class="
            absolute -top-8 left-1/2 -translate-x-1/2
            bg-comic-red text-white border-2 border-ink dark:border-paper
            px-2 py-[1px] font-bangers text-xs tracking-widest whitespace-nowrap
            shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
            scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom pointer-events-none
          ">Tema</span>
        </div>

      </div>
    </div>
  </div>
</div>

<slot />

<script>
  const btn = document.getElementById('theme-btn');
  const icon = document.getElementById('theme-icon');
  const html = document.documentElement;

  // Aplica preferencia guardada al cargar
  if (localStorage.theme === 'dark' || (!localStorage.theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    html.classList.add('dark');
    icon?.setAttribute('name', 'moon');
  }

  btn?.addEventListener('click', () => {
    const isDark = html.classList.toggle('dark');
    localStorage.theme = isDark ? 'dark' : 'light';
    icon?.setAttribute('name', isDark ? 'moon' : 'sunny');
  });
</script>