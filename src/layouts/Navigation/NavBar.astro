<div class="fixed flex justify-center items-center top-4 left-1/2 -translate-x-1/2 z-50">

  <span class="absolute -top-5 -left-4 text-2xl z-10 animate-pulse -rotate-12 select-none">⚡</span>

  <div class="relative border-[3px] border-ink dark:border-paper bg-paper dark:bg-ink shadow-[var(--shadow-comic)] px-6">

    <div class="absolute -bottom-[3px] -right-[3px] w-3 h-3 bg-ink dark:bg-paper"></div>

    <div class="h-[68px] flex items-center justify-between gap-8">

      <!-- Logo -->
      <a class="relative group cursor-pointer transition-transform hover:-rotate-6 hover:scale-110"
           href="https://ko-fi.com/Y8Y23NXBT">
        <ion-icon class="text-3xl text-ink dark:text-paper block" name="beer"></ion-icon>
        <span class="
          absolute top-9 left-1/2 -translate-x-1/2
          bg-yellow dark:bg-yellow border-2 border-ink dark:border-ink
          px-2 py-[2px] font-bangers text-sm text-ink tracking-widest whitespace-nowrap
          shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
          scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom"
          data-i18n="nav.hey" >Hey!</span>
    </a>

      <div class="w-[2px] h-9 bg-ink dark:bg-paper opacity-30"></div>

      <!-- Links -->
      <ul class="flex items-center gap-2 list-none font-bangers text-xl tracking-widest uppercase">
        <li>
          <a href="#inicio" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          "><span data-i18n="nav.inicio">Inicio</span></a>
        </li>
        <li>
          <a href="#acerca" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5 whitespace-nowrap
          "><span data-i18n="nav.acerca">Acerca de mí</span></a>
        </li>
        <li>
          <a href="#habilidades" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          "><span data-i18n="nav.habilidades">Habilidades</span></a>
        </li>
        <li>
          <a href="#proyectos" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          "><span data-i18n="nav.proyectos">Proyectos</span></a>
        </li>
        <li>
          <a href="#experiencia" class="
            block px-3 py-1.5 border-[2.5px] border-transparent
            text-ink dark:text-paper transition-all duration-150
            hover:bg-yellow dark:hover:bg-yellow hover:text-ink dark:hover:text-ink
            hover:border-ink dark:hover:border-paper
            hover:shadow-[4px_4px_0px_#1a1a2e] dark:hover:shadow-[4px_4px_0px_#fffbf0]
            hover:-translate-x-0.5 hover:-translate-y-0.5
          "><span data-i18n="nav.experiencia">Experiencia</span></a>
        </li>
      </ul>

      <div class="w-[2px] h-9 bg-ink dark:bg-paper opacity-30"></div>

      <!-- Action icons -->
      <div class="flex gap-3">

        <!-- Botón idioma — muestra el idioma activo como texto -->
        <div class="relative group">
          <button id="lang-btn" class="
            w-10 h-10 flex items-center justify-center
            border-[2.5px] border-ink dark:border-paper bg-paper dark:bg-ink
            shadow-[3px_3px_0px_#1a1a2e] dark:shadow-[3px_3px_0px_#fffbf0]
            transition-all duration-150 cursor-pointer
            hover:bg-comic-blue dark:hover:bg-comic-blue
            hover:-translate-x-0.5 hover:-translate-y-0.5
            hover:shadow-[5px_5px_0px_#1a1a2e] dark:hover:shadow-[5px_5px_0px_#fffbf0]
            active:translate-x-0.5 active:translate-y-0.5
          ">
            <span id="lang-label"
                  class="font-bangers text-sm tracking-widest text-ink dark:text-paper group-hover:text-white transition-colors">
              ES
            </span>
          </button>
          <span class="
            absolute -top-8 left-1/2 -translate-x-1/2
            bg-comic-red text-white border-2 border-ink dark:border-paper
            px-2 py-[1px] font-bangers text-xs tracking-widest whitespace-nowrap
            shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
            scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom pointer-events-none
          ">ES / EN</span>
        </div>

        <!-- Botón tema -->
        <div class="relative group">
          <button id="theme-btn" class="
            w-10 h-10 flex items-center justify-center
            border-[2.5px] border-ink dark:border-paper bg-paper dark:bg-ink
            shadow-[3px_3px_0px_#1a1a2e] dark:shadow-[3px_3px_0px_#fffbf0]
            transition-all duration-150 cursor-pointer
            hover:bg-comic-blue dark:hover:bg-comic-blue
            hover:-translate-x-0.5 hover:-translate-y-0.5
            hover:shadow-[5px_5px_0px_#1a1a2e] dark:hover:shadow-[5px_5px_0px_#fffbf0]
            active:translate-x-0.5 active:translate-y-0.5
          ">
            <ion-icon id="theme-icon"
                      class="text-xl text-ink dark:text-paper group-hover:text-white transition-colors"
                      name="sunny">
            </ion-icon>
          </button>
          <span data-i18n="nav.tema" class="
            absolute -top-8 left-1/2 -translate-x-1/2
            bg-comic-red text-white border-2 border-ink dark:border-paper
            px-2 py-[1px] font-bangers text-xs tracking-widest whitespace-nowrap
            shadow-[2px_2px_0px_#1a1a2e] dark:shadow-[2px_2px_0px_#fffbf0]
            scale-0 group-hover:scale-100 transition-transform duration-200 origin-bottom pointer-events-none
          ">Tema</span>
        </div>

      </div>
    </div>
  </div>
</div>

<slot />

<script>
  import { getLang, applyLang, toggleLang } from '../../i18n/index';

  // ── TEMA ──
  const themeBtn = document.getElementById('theme-btn');
  const themeIcon = document.getElementById('theme-icon');
  const html = document.documentElement;

  if (localStorage.theme === 'dark' || (!localStorage.theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    html.classList.add('dark');
    themeIcon?.setAttribute('name', 'moon');
  }

  themeBtn?.addEventListener('click', () => {
    const isDark = html.classList.toggle('dark');
    localStorage.theme = isDark ? 'dark' : 'light';
    themeIcon?.setAttribute('name', isDark ? 'moon' : 'sunny');
  });

  // ── IDIOMA ──
  const langBtn = document.getElementById('lang-btn');
  const langLabel = document.getElementById('lang-label');

  // Aplica el idioma guardado (o detectado) al cargar la página
  const currentLang = getLang();
  applyLang(currentLang);
  if (langLabel) langLabel.textContent = currentLang.toUpperCase();

  // Toggle al hacer click
  langBtn?.addEventListener('click', () => {
    const next = toggleLang();
    if (langLabel) langLabel.textContent = next.toUpperCase();
  });
</script>